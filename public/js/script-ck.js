function loadMap(){var e=document.getElementsByClassName("lat"),t=document.getElementsByClassName("lon"),n=document.getElementsByClassName("address")[0].firstChild.textContent,r=document.getElementsByClassName("sponsorAddress");for(var i=0;i<r.length;++i)sponsorsPosition[i]=[r[i].firstChild.textContent,"sponsor"+i];console.log(sponsorsPosition);var s=new google.maps.LatLng(e[150].firstChild.textContent,t[150].firstChild.textContent),o={center:s,zoom:mapZoom,maxZoom:mapZoomMax,scrollwheel:!1,minZoom:mapZoomMin,panControl:!1,backgroundColor:"rgba(0,0,0,0)",mapTypeControl:!1,mapTypeControlOptions:{mapTypeIds:["map_styles","map_styles_zoomed"]}};map=new google.maps.Map(document.getElementById("race-map"),o);gGeocoder=new google.maps.Geocoder;gMarker=new google.maps.Marker({position:s,map:map});map.mapTypes.set("map_styles",styled_map);map.mapTypes.set("map_styles_zoomed",styled_map_zoomed);map.setMapTypeId("map_styles_zoomed");for(var i=0;i<e.length;++i)trajet[i]=new google.maps.LatLng(e[i].firstChild.textContent,t[i].firstChild.textContent);elevator=new google.maps.ElevationService;drawPath();var u=function(e,t){gGeocoder.geocode({address:e,region:"BE"},function(e,n){t.setPosition(e[0].geometry.location)})};u(n,gMarker);for(var i=0;i<sponsorsPosition.length;++i){sponsorsPosition[i][1]=new google.maps.Marker({position:s,map:map});u(sponsorsPosition[i][0],sponsorsPosition[i][1])}google.maps.event.addListener(map,"zoom_changed",function(){var e=map.getZoom();e>6?map.setMapTypeId("map_styles_zoomed"):map.setMapTypeId("map_styles")})}function drawPath(){chart=new google.visualization.ColumnChart(document.getElementById("elevation_chart"));var e=trajet,t={path:e,samples:256};elevator.getElevationAlongPath(t,plotElevation)}function plotElevation(e,t){if(t!=google.maps.ElevationStatus.OK)return;var n=e,r=[];for(var i=0;i<e.length;i++)r.push(n[i].location);var s={path:r,strokeColor:"rgb(244,129,64)",opacity:.4,map:map};polyline=new google.maps.Polyline(s);var o=new google.visualization.DataTable;o.addColumn("string","Sample");o.addColumn("number","Elevation");for(var i=0;i<e.length;i++)o.addRow(["",n[i].elevation]);document.getElementById("elevation_chart").style.width="auto";chart.draw(o,{chartType:"LineChart",height:150,colors:["#90A1BF"],width:"auto",legend:"none",titleY:"Elevation (m)",titleX:"Distance"})}var style_map=[{featureType:"administrative",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"landscape",stylers:[{color:"#90A1BF"}]},{featureType:"water",stylers:[{visibility:"on"},{color:"#ffffff"}]}],style_map_zoomed=[{featureType:"administrative",stylers:[{visibility:"on"}]},{featureType:"poi",stylers:[{visibility:"on"}]},{featureType:"transit",stylers:[{visibility:"on"}]},{featureType:"road",stylers:[{visibility:"simplified"}]},{featureType:"water",stylers:[{visibility:"on"}]},{featureType:"landscape",stylers:[{visibility:"on"},{color:"#90A1BF"}]}],styled_map=new google.maps.StyledMapType(style_map,{name:"Map style"}),styled_map_zoomed=new google.maps.StyledMapType(style_map_zoomed,{name:"Map style zoomed"}),mapZoom=13,mapZoomMax=18,mapZoomMin=4;google.load("visualization","1.0",{packages:["corechart"]});var map,elevator,chart,infowindow=new google.maps.InfoWindow,polyline,trajet=[],gMarker,startPosition,sponsorsPosition=[],gGeocoder;google.maps.event.addDomListener(window,"load",loadMap);